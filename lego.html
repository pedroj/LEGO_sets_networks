<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Pedro Jordano">
<meta name="dcterms.date" content="2015-02-18">

<title>LEGO sets</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="lego_files/libs/clipboard/clipboard.min.js"></script>
<script src="lego_files/libs/quarto-html/quarto.js"></script>
<script src="lego_files/libs/quarto-html/popper.min.js"></script>
<script src="lego_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="lego_files/libs/quarto-html/anchor.min.js"></script>
<link href="lego_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="lego_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="lego_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="lego_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="lego_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">LEGO sets</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Pedro Jordano </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 18, 2015</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="lego-sets-diversity-and-connectivity-analysis" class="level3">
<h3 class="anchored" data-anchor-id="lego-sets-diversity-and-connectivity-analysis">LEGO sets diversity and connectivity analysis</h3>
<p>This is an analysis of LEGO sets patterns of component parts: their diversity and connectivity forms.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vegan)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"png"</span>)                      <span class="co"># Load png package</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("patchwork")       # Install patchwork package</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"patchwork"</span>)                <span class="co"># Load patchwork</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="input-data" class="level2">
<h2 class="anchored" data-anchor-id="input-data">Input data</h2>
<p>Input inventory datasets from [BrickLink][http://www.bricklink.com]</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Input from local drive; previously downloaded files from Rebrickable.</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>colors <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/extdata/colors.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 217 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (2): name, rgb
dbl (1): id
lgl (1): is_trans

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>inventories <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data/extdata/inventories.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 35365 Columns: 3
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): set_num
dbl (2): id, version

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>inventory_parts <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data/extdata/inventory_parts.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 1108599 Columns: 6
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (2): part_num, img_url
dbl (3): inventory_id, color_id, quantity
lgl (1): is_spare

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>inventory_sets <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data/extdata/inventory_sets.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 4216 Columns: 3
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): set_num
dbl (2): inventory_id, quantity

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>part_categories <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data/extdata/part_categories.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 66 Columns: 2
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): name
dbl (1): id

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>parts <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data/extdata/parts.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 50328 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (3): part_num, name, part_material
dbl (1): part_cat_id

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>sets <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data/extdata/sets.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 20774 Columns: 6
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (3): set_num, name, img_url
dbl (3): year, theme_id, num_parts

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>themes <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data/extdata/themes.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 461 Columns: 3
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): name
dbl (2): id, parent_id

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>elements <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data/extdata/elements.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 77737 Columns: 3
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): part_num
dbl (2): element_id, color_id

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>inventory_minifigs <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data/extdata/inventory_minifigs.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 19684 Columns: 3
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): fig_num
dbl (2): inventory_id, quantity

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>minifigs <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data/extdata/minifigs.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 13006 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (3): fig_num, name, img_url
dbl (1): num_parts

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>part_relationships <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data/extdata/part_relationships.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 28258 Columns: 3
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (3): rel_type, child_part_num, parent_part_num

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Direct download from Rebrickable.</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>urlthemes <span class="ot">&lt;-</span> <span class="st">"https://cdn.rebrickable.com/media/downloads/themes.csv.gz"</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>urlcolors <span class="ot">&lt;-</span> <span class="st">"https://cdn.rebrickable.com/media/downloads/colors.csv.gz"</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>urlpart_categories<span class="ot">&lt;-</span> <span class="st">"https://cdn.rebrickable.com/media/downloads/part_categories.csv.gz"</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>urlparts<span class="ot">&lt;-</span> <span class="st">"https://cdn.rebrickable.com/media/downloads/parts.csv.gz"</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>urlsets<span class="ot">&lt;-</span> <span class="st">"https://cdn.rebrickable.com/media/downloads/sets.csv.gz?1678349282.4992967"</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>urlpart_relationships<span class="ot">&lt;-</span> <span class="st">"https://cdn.rebrickable.com/media/downloads/part_relationships.csv.gz"</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>urlelements<span class="ot">&lt;-</span> <span class="st">"https://cdn.rebrickable.com/media/downloads/elements.csv.gz"</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>urlminifigs<span class="ot">&lt;-</span> <span class="st">"https://cdn.rebrickable.com/media/downloads/minifigs.csv.gz"</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>urlinventories <span class="ot">&lt;-</span> <span class="st">"https://cdn.rebrickable.com/media/downloads/inventories.csv.gz"</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>urlinventory_parts<span class="ot">&lt;-</span> <span class="st">"https://cdn.rebrickable.com/media/downloads/inventory_parts.csv.gz"</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>urlinventory_sets<span class="ot">&lt;-</span> <span class="st">"https://cdn.rebrickable.com/media/downloads/inventory_sets.csv.gz"</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>urlinventory_minifigs<span class="ot">&lt;-</span> <span class="st">"https://cdn.rebrickable.com/media/downloads/inventory_minifigs.csv.gz"</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="do">##----------------------------</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>dwld <span class="ot">&lt;-</span> <span class="cf">function</span>(url) {</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>    tmp <span class="ot">&lt;-</span> <span class="fu">tempfile</span>()</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">download.file</span>(url,tmp)  </span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read.csv</span>(</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gzfile</span>(tmp),</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep=</span><span class="st">","</span>,</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">header=</span><span class="cn">TRUE</span>,</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">stringsAsFactors=</span>T)</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>      <span class="co">#names(data)[1] &lt;- sub("X\\.","",names(data)[1])</span></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a><span class="co">#-----------------------------</span></span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>themes<span class="ot">&lt;-</span> <span class="fu">dwld</span>(urlthemes)</span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>colors <span class="ot">&lt;-</span> <span class="fu">dwld</span>(urlcolors)</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>inventories <span class="ot">&lt;-</span> <span class="fu">dwld</span>(urlinventories)</span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>inventory_parts <span class="ot">&lt;-</span> <span class="fu">dwld</span>(urlinventory_parts)</span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>inventory_sets <span class="ot">&lt;-</span> <span class="fu">dwld</span>(urlinventory_sets)</span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>part_categories <span class="ot">&lt;-</span> <span class="fu">dwld</span>(urlpart_categories)</span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>parts <span class="ot">&lt;-</span> <span class="fu">dwld</span>(urlparts)</span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>sets <span class="ot">&lt;-</span> <span class="fu">dwld</span>(urlsets)</span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a>themes <span class="ot">&lt;-</span> <span class="fu">dwld</span>(urlthemes)</span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a>elements <span class="ot">&lt;-</span> <span class="fu">dwld</span>(urlelements)</span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a>inventory_minifigs <span class="ot">&lt;-</span> <span class="fu">dwld</span>(urlinventory_minifigs)</span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a>minifigs <span class="ot">&lt;-</span> <span class="fu">dwld</span>(urlminifigs)</span>
<span id="cb26-39"><a href="#cb26-39" aria-hidden="true" tabindex="-1"></a>part_relationships <span class="ot">&lt;-</span> <span class="fu">dwld</span>(urlpart_relationships)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Create joined datasets with different informatioon on sets and parts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Joins:</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 0 inventory_parts</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1 . , inventories</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2 . , parts</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 3 . , part_categories</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 4 . , colors</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 5 . , sets</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 6 . , themes</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>lego_parts <span class="ot">&lt;-</span> <span class="fu">left_join</span>(inventory_parts, inventories,</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">by=</span><span class="fu">c</span>(<span class="st">"inventory_id"</span> <span class="ot">=</span> <span class="st">"id"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(parts, <span class="at">by=</span><span class="st">"part_num"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(part_categories, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"part_cat_id"</span><span class="ot">=</span><span class="st">"id"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"part_name"</span><span class="ot">=</span>name.x, <span class="st">"part_category"</span><span class="ot">=</span>name.y) <span class="sc">%&gt;%</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(colors, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"color_id"</span><span class="ot">=</span><span class="st">"id"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">color_name=</span><span class="st">"name"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(sets, <span class="at">by=</span><span class="st">"set_num"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(themes, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"theme_id"</span> <span class="ot">=</span> <span class="st">"id"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"set_name"</span><span class="ot">=</span>name.x, <span class="st">"theme_name"</span><span class="ot">=</span>name.y)</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>lego_parts <span class="ot">&lt;-</span> <span class="fu">rename</span>(lego_parts, <span class="st">"set_img_url"</span><span class="ot">=</span>img_url.y, <span class="st">"part_img_url"</span><span class="ot">=</span>img_url.x)</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>lego_parts<span class="ot">&lt;-</span> lego_parts <span class="sc">%&gt;%</span> <span class="fu">select</span>(theme_name, </span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>                      theme_id, </span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>                      set_img_url,</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>                      set_num, </span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>                      set_name, </span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>                      year, </span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>                      num_parts,</span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>                      inventory_id, </span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>                      part_cat_id,</span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>                      part_category,</span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>                      part_num, </span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a>                      part_name,</span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a>                      quantity,</span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a>                      part_img_url,</span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a>                      part_material,</span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a>                      color_id,</span>
<span id="cb27-40"><a href="#cb27-40" aria-hidden="true" tabindex="-1"></a>                      color_name,</span>
<span id="cb27-41"><a href="#cb27-41" aria-hidden="true" tabindex="-1"></a>                      is_trans,</span>
<span id="cb27-42"><a href="#cb27-42" aria-hidden="true" tabindex="-1"></a>                      rgb,</span>
<span id="cb27-43"><a href="#cb27-43" aria-hidden="true" tabindex="-1"></a>                      parent_id,</span>
<span id="cb27-44"><a href="#cb27-44" aria-hidden="true" tabindex="-1"></a>                      is_spare,</span>
<span id="cb27-45"><a href="#cb27-45" aria-hidden="true" tabindex="-1"></a>                      version)</span>
<span id="cb27-46"><a href="#cb27-46" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(lego_parts, <span class="st">"data/extdata/lego_parts.csv"</span>)</span>
<span id="cb27-47"><a href="#cb27-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-48"><a href="#cb27-48" aria-hidden="true" tabindex="-1"></a>lego_sets <span class="ot">&lt;-</span> <span class="fu">left_join</span>(sets, themes, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"theme_id"</span> <span class="ot">=</span> <span class="st">"id"</span>))</span>
<span id="cb27-49"><a href="#cb27-49" aria-hidden="true" tabindex="-1"></a>lego_sets <span class="ot">&lt;-</span> <span class="fu">rename</span>(lego_sets, <span class="st">"set_name"</span><span class="ot">=</span>name.x, <span class="st">"theme_name"</span><span class="ot">=</span>name.y,</span>
<span id="cb27-50"><a href="#cb27-50" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"set_img_url"</span><span class="ot">=</span> img_url)</span>
<span id="cb27-51"><a href="#cb27-51" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(lego_sets, <span class="st">"data/extdata/lego_sets.csv"</span>)</span>
<span id="cb27-52"><a href="#cb27-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-53"><a href="#cb27-53" aria-hidden="true" tabindex="-1"></a><span class="co"># main&lt;- left_join(dleft06, elements, by=c("part_num","color_id"))</span></span>
<span id="cb27-54"><a href="#cb27-54" aria-hidden="true" tabindex="-1"></a><span class="co"># names(main)</span></span>
<span id="cb27-55"><a href="#cb27-55" aria-hidden="true" tabindex="-1"></a><span class="co"># dim(main)</span></span>
<span id="cb27-56"><a href="#cb27-56" aria-hidden="true" tabindex="-1"></a><span class="co"># write_csv(main,"data/extdata/main.csv")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="diversity" class="level2">
<h2 class="anchored" data-anchor-id="diversity">Diversity</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Anakin Skywalker and Sebulba's Podracers</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>AnaSebPodRac_7962 <span class="ot">&lt;-</span> lego_parts <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(set_num <span class="sc">==</span> <span class="st">"7962-1"</span>) </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>tt<span class="ot">&lt;-</span>AnaSebPodRac_7962  <span class="sc">%&gt;%</span> </span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(part_num)  <span class="sc">%&gt;%</span> </span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>())</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="do">##################</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="co"># SUBSETS</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>lego_parts <span class="sc">%&gt;%</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(theme_name <span class="sc">==</span> <span class="st">"Star Wars"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  theme_name theme_id                                        set_img_url
1  Star Wars      158 https://cdn.rebrickable.com/media/sets/30277-1.jpg
2  Star Wars      158 https://cdn.rebrickable.com/media/sets/30277-1.jpg
3  Star Wars      158 https://cdn.rebrickable.com/media/sets/30277-1.jpg
4  Star Wars      158 https://cdn.rebrickable.com/media/sets/30277-1.jpg
  set_num                   set_name year num_parts inventory_id part_cat_id
1 30277-1 First Order Star Destroyer 2016        56           22           9
2 30277-1 First Order Star Destroyer 2016        56           22          15
3 30277-1 First Order Star Destroyer 2016        56           22          21
4 30277-1 First Order Star Destroyer 2016        56           22          14
                   part_category part_num
1                 Plates Special    15573
2                  Tiles Special    2412b
3 Plates Round Curved and Dishes     2654
4                         Plates     3020
                                                                    part_name
1 Plate Special 1 x 2 with 1 Stud with Groove and Inside Stud Holder (Jumper)
2                                Tile Special 1 x 2 Grille with Bottom Groove
3                           Plate Round 2 x 2 with Rounded Bottom [Boat Stud]
4                                                                 Plate 2 x 4
  quantity                                                 part_img_url
1        1 https://cdn.rebrickable.com/media/parts/elements/6092572.jpg
2        3 https://cdn.rebrickable.com/media/parts/elements/4619636.jpg
3        4 https://cdn.rebrickable.com/media/parts/elements/4278274.jpg
4        2  https://cdn.rebrickable.com/media/parts/elements/302026.jpg
  part_material color_id       color_name is_trans    rgb parent_id is_spare
1       Plastic       72 Dark Bluish Gray        f 6C6E68        NA        f
2       Plastic      179      Flat Silver        f 898788        NA        f
3       Plastic       72 Dark Bluish Gray        f 6C6E68        NA        f
4       Plastic        0            Black        f 05131D        NA        f
  version
1       1
2       1
3       1
4       1
 [ reached 'max' / getOption("max.print") -- omitted 76583 rows ]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>podracers<span class="ot">&lt;-</span> lego_parts <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>         dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">'odracer'</span>, set_name))</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>microfighter<span class="ot">&lt;-</span> lego_parts <span class="sc">%&gt;%</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>         dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">'microfighter'</span>, set_name))</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>Starwars<span class="ot">&lt;-</span> lego_parts <span class="sc">%&gt;%</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>         dplyr<span class="sc">::</span><span class="fu">select</span>(set_num, set_name, year, theme_name, theme_id, inventory_id, </span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>                       part_num, part_name, quantity, num_parts)  <span class="sc">%&gt;%</span> </span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>         dplyr<span class="sc">::</span><span class="fu">filter</span>(theme_name <span class="sc">==</span> <span class="st">"Star Wars"</span>)</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>Creator<span class="ot">&lt;-</span> lego_parts <span class="sc">%&gt;%</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">select</span>(set_num, set_name, year, theme_name, theme_id, inventory_id, </span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>                       part_num, part_name, quantity, num_parts) <span class="sc">%&gt;%</span> </span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"Creator"</span>, theme_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Groups of models</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>stw_H<span class="ot">&lt;-</span> Starwars <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(set_name) <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">H=</span> vegan<span class="sc">::</span><span class="fu">diversity</span>(<span class="fu">table</span>(quantity), </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">index =</span> <span class="st">"shannon"</span>, <span class="at">MARGIN =</span> <span class="dv">1</span>, <span class="at">base =</span> <span class="fu">exp</span>(<span class="dv">1</span>)))</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>stw_Simp<span class="ot">&lt;-</span> Starwars <span class="sc">%&gt;%</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(set_name) <span class="sc">%&gt;%</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">simp=</span> vegan<span class="sc">::</span><span class="fu">diversity</span>(<span class="fu">table</span>(quantity), <span class="st">"simpson"</span>)) </span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>stw_invSimp<span class="ot">&lt;-</span> Starwars <span class="sc">%&gt;%</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(set_name) <span class="sc">%&gt;%</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">invSimp=</span> vegan<span class="sc">::</span><span class="fu">diversity</span>(<span class="fu">table</span>(quantity), </span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">index =</span> <span class="st">"inv"</span>)) </span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>stw_unbSimp<span class="ot">&lt;-</span> Starwars <span class="sc">%&gt;%</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(set_name) <span class="sc">%&gt;%</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">unbias.simp=</span> vegan<span class="sc">::</span><span class="fu">rarefy</span>(<span class="fu">table</span>(quantity), </span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>                     <span class="dv">2</span>) <span class="sc">-</span> <span class="dv">1</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There were 145 warnings in `dplyr::summarize()`.
The first warning was:
ℹ In argument: `unbias.simp = vegan::rarefy(table(quantity), 2) - 1`.
ℹ In group 1: `set_name = "212th Clone Trooper"`.
Caused by warning in `vegan::rarefy()`:
! requested 'sample' was larger than smallest site maximum (1)
ℹ Run `dplyr::last_dplyr_warnings()` to see the 144 remaining warnings.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stw_alpha&lt;- Starwars %&gt;%</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co">#     group_by(set_name) %&gt;%</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co">#     dplyr::summarize(alpha= vegan::fisher.alpha(table(quantity))) </span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>stw_S<span class="ot">&lt;-</span> Starwars <span class="sc">%&gt;%</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(set_name) <span class="sc">%&gt;%</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">S=</span> vegan<span class="sc">::</span><span class="fu">specnumber</span>(<span class="fu">table</span>(quantity)))</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>stw_J<span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">cbind</span>(<span class="at">set_name=</span>stw_H<span class="sc">$</span>set_name, <span class="at">J=</span> stw_H<span class="sc">$</span>H<span class="sc">/</span><span class="fu">log</span>(stw_S<span class="sc">$</span>S)))</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="co">#(J= H/log(S))</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="co">#-----------------------------------</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>Starwars_div<span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">cbind</span>(</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>                            stw_H, </span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>                            <span class="at">simp=</span> stw_Simp<span class="sc">$</span>simp,</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>                            <span class="at">invSimp=</span> stw_invSimp<span class="sc">$</span>invSimp,</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>                            <span class="at">unbias.simp=</span> stw_unbSimp<span class="sc">$</span>unbias.simp,</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">S=</span> stw_S<span class="sc">$</span>S,</span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">J=</span> stw_J<span class="sc">$</span>J</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>                            ))</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>tt<span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">table</span>(Starwars<span class="sc">$</span>set_name))</span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>tt <span class="ot">&lt;-</span> <span class="fu">rename</span>(tt, <span class="st">"set_name"</span><span class="ot">=</span>Var1, <span class="st">"num_parts"</span><span class="ot">=</span>Freq)</span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>tt<span class="ot">&lt;-</span> <span class="fu">inner_join</span>(tt, Starwars[,<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>], <span class="at">by =</span> <span class="st">"set_name"</span>,<span class="at">multiple=</span><span class="st">"first"</span>)</span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>Starwars_div<span class="ot">&lt;-</span>  <span class="fu">as.data.frame</span>(<span class="fu">cbind</span>(tt,Starwars_div[,<span class="sc">-</span><span class="dv">1</span>]))</span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>Starwars_div<span class="ot">&lt;-</span> Starwars_div <span class="sc">%&gt;%</span> <span class="co"># Filtering out H'=0 records.</span></span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">filter</span>(H <span class="sc">!=</span> <span class="dv">0</span>)</span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Plots of H' vs no. parts for sets.</span></span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(Starwars_div<span class="sc">$</span>num_parts,Starwars_div<span class="sc">$</span>H)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lego_files/figure-html/diversity_themes-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>gg <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Starwars_div, <span class="fu">aes</span>(<span class="at">x =</span> num_parts<span class="sc">+</span><span class="dv">1</span>, <span class="at">y =</span> H<span class="sc">+</span><span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span> <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>gg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lego_files/figure-html/diversity_themes-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="diversity-for-specific-sets" class="level4">
<h4 class="anchored" data-anchor-id="diversity-for-specific-sets">Diversity for specific sets</h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>          H    simp invsimp unbias.simp  alpha   S       J
[1,] 4.6855 0.98854  87.258     0.99394 181.24 127 0.96725</code></pre>
</div>
</div>
</section>
<section id="diversity-analysis-for-all-lego-sets." class="level3">
<h3 class="anchored" data-anchor-id="diversity-analysis-for-all-lego-sets.">Diversity analysis for all LEGO sets.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sets and Themes.</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Subsetting main themes (those with ≥ 10 sets).</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(lego_sets)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "set_num"     "set_name"    "year"        "theme_id"    "num_parts"  
[6] "set_img_url" "theme_name"  "parent_id"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>subset_themes_n10<span class="ot">&lt;-</span> lego_sets <span class="sc">%&gt;%</span> <span class="co"># Subsetting main themes (those with ≥ 10 sets).</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>                                  <span class="co"># There are 51 themes with at least 10 parts,</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="co"># and are not Minifigures, Value Packs, or</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>                                  <span class="co"># Audio and Visual Media.</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">select</span>(theme_name, theme_id, set_name, year, num_parts) <span class="sc">%&gt;%</span> </span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">group_by</span>(theme_name) <span class="sc">%&gt;%</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">sum_parts =</span> <span class="fu">sum</span>(num_parts), <span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(sum_parts<span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Audio and'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Minifig'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Key Chain'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Books'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Service Packs'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Stationery and Office Supplies'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Duplo and Explore'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Houseware'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Clocks and Watches'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Storage'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Bulk Bricks'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Duplo'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Magnets'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Primo'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Tabletop Games and Puzzles'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'LEGO Originals'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Power Functions'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Powered Up'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Books'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Books'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Value'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-30"><a href="#cb39-30" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">9</span>) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span>
<span id="cb39-31"><a href="#cb39-31" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(subset_themes_n10, <span class="at">n=</span><span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 233 × 3
    theme_name                                 sum_parts     n
    &lt;fct&gt;                                          &lt;int&gt; &lt;int&gt;
  1 Star Wars                                     233777   886
  2 Technic                                       240522   837
  3 Friends                                       112048   545
  4 Gear                                            1195   481
  5 Ninjago                                       105705   474
  6 Basic Set                                      40466   473
  7 Bionicle                                       27748   444
  8 Supplemental                                   14741   434
  9 Town                                           30083   416
 10 Classic Town                                   51155   410
 11 Video Games and Accessories                      355   283
 12 Racers                                         25971   241
 13 Creator                                        46983   215
 14 City                                           39501   211
 15 Creator 3-in-1                                 71652   210
 16 Police                                         32685   187
 17 LEGO Brand Store                               10726   174
 18 Monthly Mini Model Build                        6113   153
 19 Brickheadz                                     28081   145
 20 Christmas                                      20333   145
 21 Harry Potter                                   70500   144
 22 Super Mario                                    25912   140
 23 Basic                                          38926   139
 24 Promotional                                    13887   138
 25 Mixels                                          4996   121
 26 Fire                                           18951   116
 27 Nexo Knights                                   18846   113
 28 Educational and Dacta                          44363   111
 29 Construction                                   15150   110
 30 DOTS                                           22224   107
 31 Disney Princess                                15387   106
 32 Minecraft                                      39306   106
 33 Fabuland                                        3640   105
 34 Other                                          15337   105
 35 Soccer                                          7006   104
 36 Seasonal                                        5128   103
 37 Batman                                         26364   101
 38 9V                                             15784   100
 39 Universal Building Set                         15450    99
 40 Legends of Chima                               29156    98
 41 Trains                                         14296    97
 42 Spider-Man                                     21278    90
 43 Belville                                        7872    89
 44 Classic Space                                  10366    89
 45 FIRST LEGO League                              43634    89
 46 4.5V                                           11186    86
 47 Jurassic World                                 18703    86
 48 Clikits                                         4726    85
 49 Train                                           2080    82
 50 Avengers                                       25315    81
 51 Super Heroes Marvel                            27424    80
 52 Legoville                                       1837    77
 53 Vehicle                                         5950    75
 54 Knights Kingdom II                              7173    73
 55 Scala                                           3488    73
 56 Classic                                        33298    69
 57 Dimensions                                      6091    68
 58 Bricks &amp; More                                  28432    67
 59 Pirates I                                      12292    67
 60 Speed Champions                                21014    65
 61 The LEGO Movie II                              17606    65
 62 Freestyle                                      15921    63
 63 HO 1:87 Vehicles                                 164    63
 64 Playhouse                                       1799    58
 65 The LEGO Ninjago Movie                         21483    58
 66 LEGO Exclusive                                 26366    57
 67 Cars                                            7068    56
 68 LEGO Ideas and CUUSOO                          64135    56
 69 Airport                                        11499    55
 70 Legoland Parks                                  9331    55
 71 Classic Basic                                  11353    53
 72 NXT                                             3726    53
 73 Studios                                         2563    53
 74 12V                                             7419    52
 75 Exo-Force                                      10150    52
 76 Traffic                                        15133    52
 77 Make &amp; Create                                  24393    51
 78 VIDIYO                                          3612    51
 79 Creator Expert                                 79053    49
 80 The LEGO Movie                                 11524    49
 81 Games                                           8220    47
 82 Architecture                                   30312    46
 83 Designer Sets                                   9410    46
 84 Easter                                          3968    46
 85 World City                                      7382    45
 86 Heroes                                          2377    44
 87 The LEGO Batman Movie                          16260    44
 88 Basketball                                      1791    43
 89 Monkie Kid                                     35685    43
 90 Elves                                          13951    42
 91 Ultimate Collector Series                      98627    42
 92 Town Plan                                       6084    41
 93 Town Jr.                                        4047    40
 94 Expert Builder                                  9946    39
 95 WeDo                                             987    37
 96 Early Creator                                   8645    36
 97 Western                                         5240    36
 98 Castle                                          5130    35
 99 Icons                                          89731    35
100 Modulex                                         2606    35
101 Hero Factory                                    1730    34
102 Building                                        4369    33
103 Villains                                        2527    33
104 Arctic                                          6229    32
105 Bricktober                                      3672    32
106 Building Set with People                        4750    32
107 Ferrari                                        13518    32
108 Hidden Side                                     9822    32
109 Homemaker                                       4817    32
110 Juniors                                         4668    32
111 Pick A Model                                    1294    32
112 Bob the Builder                                  785    31
113 Fantasy Era                                    10618    31
114 Ninja                                           2951    31
115 RCX                                             7523    31
116 RoboRiders                                       746    31
117 Super Heroes DC                                 2214    31
118 Disney                                         14058    30
119 Halloween                                       2862    30
120 Speedorz                                        2950    30
121 Frozen                                          6964    29
122 BrickLink Designer Program                     46888    28
123 Hospital                                        4833    28
124 Jack Stone                                      1177    28
125 Orient Expedition                               2579    28
126 Toy Story                                       4082    27
127 Coast Guard                                     5476    26
128 Desert                                          2815    26
129 Life On Mars                                    2332    26
130 Lion Knights                                    3240    26
131 Mindstorms                                      6620    26
132 Stuntz                                          3797    26
133 Unikitty!                                       2297    26
134 Harry Potter and Fantastic Beasts Series 1       171    25
135 Atlantis                                        5323    24
136 Constraction                                    1117    24
137 X-Pod                                            999    24
138 4 Juniors                                        951    23
139 Dino                                            2839    23
140 Knights Kingdom I                               2873    23
141 Power Miners                                    4338    23
142 Rattles                                           63    23
143 Teenage Mutant Ninja Turtles                    7148    23
144 The Hobbit                                      6422    23
145 The LEGO Batman Movie Series 1                   145    23
146 The LEGO Batman Movie Series 2                   151    23
147 Boat                                            3085    22
148 Chinese Traditional Festivals                  13528    22
149 City Center                                     2018    22
150 Space Port                                      1463    22
151 Disney Series 1                                  113    21
152 Disney Series 2                                  132    21
153 Extreme Team                                    1605    21
154 Harbor                                          3709    21
155 Mars Mission                                    6006    21
156 Master Builder Academy                          3491    21
157 Disney's Mickey Mouse                            969    20
158 Galidor                                          219    20
159 Indiana Jones                                   6130    20
160 DC Super Heroes                                  148    19
161 Dino Island                                     1779    19
162 Futuron                                         2449    19
163 Harry Potter and Fantastic Beasts Series 2       129    19
164 Insectoids                                      1607    19
165 Jungle                                          4570    19
166 McDonalds                                        442    19
167 Minitalia                                       1777    19
168 The Simpsons Series 1                             89    19
169 The Simpsons Series 2                             93    19
170 UFO                                             1429    19
171 Xtra                                             468    19
172 Znap                                            1700    19
173 Cities of Wonders                               3183    18
174 Competition                                     5270    18
175 Hockey                                          1264    18
176 Modular Buildings                              44652    18
177 Paradisa                                        2386    18
178 Thomas &amp; Friends                                 441    18
179 Throwbot Slizer                                  981    18
180 Winnie the Pooh                                  380    18
181 Farm                                            3005    17
182 Ferries                                         3995    17
183 Kingdoms                                        4935    17
184 Mission Deep Sea                                1446    17
185 Pirates of the Caribbean                        6555    17
186 Rock Raiders                                    1418    17
187 Space Police III                                4246    17
188 The Lord of the Rings                           7700    17
189 Valentine                                       1786    17
190 Airlines                                         965    16
191 Fright Knights                                  1486    16
192 Justice League                                  5301    16
193 Looney Tunes                                      91    16
194 Marvel                                           121    16
195 Model Team                                     10933    16
196 Race                                            1218    16
197 System                                          1731    16
198 The Muppets                                       86    16
199 Little Robots                                    185    15
200 Pirates II                                      3707    15
201 Ultra Agents                                    6329    15
202 Black Knights                                   2017    14
203 Blacktron II                                    1454    14
204 Dinosaurs                                        319    14
205 Monster Fighters                                5489    14
206 Skylines                                        7294    14
207 SpongeBob SquarePants                           4388    14
208 Agents                                          5640    13
209 Dragon Knights                                  1457    13
210 EV3                                              649    13
211 Island Xtreme Stunts                            1054    13
212 LEGO Art                                       49877    13
213 Overwatch                                       3414    13
214 Playsets                                        4859    13
215 Superman                                        1406    13
216 Toolo                                            382    13
217 DC Super Hero Girls                             3706    12
218 Divers                                          2312    12
219 Galaxy Squad                                    4381    12
220 Guardians of the Galaxy                         2988    12
221 Mars Exploration                                3201    12
222 Team GB                                           63    12
223 Gravity Games                                    718    11
224 Ice Planet 2002                                 1163    11
225 My Town                                          312    11
226 Quatro                                           524    11
227 Res-Q                                           1396    11
228 Space                                           2476    11
229 Alien Conquest                                  2274    10
230 Learning                                        2984    10
231 Little Forest Friends                            208    10
232 Off-Road                                        1680    10
233 Scooby-Doo                                      1910    10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select rows in lego_parts that match those sets listed in 'subset_themes_n10'.</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>subset_parts_themes_n10<span class="ot">&lt;-</span> lego_parts <span class="sc">%&gt;%</span> </span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Subsetting main themes (those with ≥ 10 sets).</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Here I filter those themes not included in </span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>     <span class="co"># subset_themes_n10, but using the whole list</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>     <span class="co"># of parts.</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>     <span class="fu">select</span>(theme_name, </span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>                      theme_id, </span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>                      set_img_url,</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>                      set_num, </span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>                      set_name, </span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>                      year, </span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>                      num_parts,</span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>                      inventory_id, </span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>                      part_cat_id,</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>                      part_category,</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>                      part_num, </span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>                      part_name,</span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>                      quantity,</span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>                      part_img_url,</span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>                      part_material,</span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>                      color_id,</span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>                      color_name,</span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>                      is_trans,</span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a>                      rgb,</span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a>                      parent_id,</span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a>                      is_spare,</span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a>                      version) <span class="sc">%&gt;%</span> </span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a>     <span class="co">#dplyr::group_by(theme_name, set_name) %&gt;%</span></span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a>     <span class="co">#dplyr::summarise(sum_parts = sum(num_parts), n = n()) %&gt;% </span></span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a>     <span class="co">#dplyr::filter(sum_parts&gt; 0) %&gt;% </span></span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Audio and'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Minifig'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-35"><a href="#cb41-35" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Key Chain'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-36"><a href="#cb41-36" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Books'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-37"><a href="#cb41-37" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Service Packs'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-38"><a href="#cb41-38" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Stationery and Office Supplies'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-39"><a href="#cb41-39" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Duplo and Explore'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-40"><a href="#cb41-40" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Houseware'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-41"><a href="#cb41-41" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Clocks and Watches'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-42"><a href="#cb41-42" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Storage'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-43"><a href="#cb41-43" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Bulk Bricks'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-44"><a href="#cb41-44" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Duplo'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-45"><a href="#cb41-45" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Magnets'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-46"><a href="#cb41-46" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Primo'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-47"><a href="#cb41-47" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Tabletop Games and Puzzles'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-48"><a href="#cb41-48" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'LEGO Originals'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-49"><a href="#cb41-49" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Power Functions'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-50"><a href="#cb41-50" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Powered Up'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-51"><a href="#cb41-51" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Books'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-52"><a href="#cb41-52" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Books'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-53"><a href="#cb41-53" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Value'</span>, theme_name)) <span class="co">#%&gt;% </span></span>
<span id="cb41-54"><a href="#cb41-54" aria-hidden="true" tabindex="-1"></a>     <span class="co">#dplyr::filter(n &gt; 9) %&gt;% dplyr::arrange(desc(n))</span></span>
<span id="cb41-55"><a href="#cb41-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-56"><a href="#cb41-56" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------</span></span>
<span id="cb41-57"><a href="#cb41-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Groups of models</span></span>
<span id="cb41-58"><a href="#cb41-58" aria-hidden="true" tabindex="-1"></a><span class="co"># ALL SETS.</span></span>
<span id="cb41-59"><a href="#cb41-59" aria-hidden="true" tabindex="-1"></a>all_H<span class="ot">&lt;-</span> lego_parts <span class="sc">%&gt;%</span></span>
<span id="cb41-60"><a href="#cb41-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(set_name) <span class="sc">%&gt;%</span></span>
<span id="cb41-61"><a href="#cb41-61" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">H=</span> vegan<span class="sc">::</span><span class="fu">diversity</span>(<span class="fu">table</span>(quantity), </span>
<span id="cb41-62"><a href="#cb41-62" aria-hidden="true" tabindex="-1"></a>                 <span class="at">index =</span> <span class="st">"shannon"</span>, <span class="at">MARGIN =</span> <span class="dv">1</span>, <span class="at">base =</span> <span class="fu">exp</span>(<span class="dv">1</span>)))</span>
<span id="cb41-63"><a href="#cb41-63" aria-hidden="true" tabindex="-1"></a>all_Simp<span class="ot">&lt;-</span> lego_parts <span class="sc">%&gt;%</span></span>
<span id="cb41-64"><a href="#cb41-64" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(set_name) <span class="sc">%&gt;%</span></span>
<span id="cb41-65"><a href="#cb41-65" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">simp=</span> vegan<span class="sc">::</span><span class="fu">diversity</span>(<span class="fu">table</span>(quantity), <span class="st">"simpson"</span>)) </span>
<span id="cb41-66"><a href="#cb41-66" aria-hidden="true" tabindex="-1"></a>all_invSimp<span class="ot">&lt;-</span> lego_parts <span class="sc">%&gt;%</span></span>
<span id="cb41-67"><a href="#cb41-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(set_name) <span class="sc">%&gt;%</span></span>
<span id="cb41-68"><a href="#cb41-68" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">invSimp=</span> vegan<span class="sc">::</span><span class="fu">diversity</span>(<span class="fu">table</span>(quantity), </span>
<span id="cb41-69"><a href="#cb41-69" aria-hidden="true" tabindex="-1"></a>                 <span class="at">index =</span> <span class="st">"inv"</span>)) </span>
<span id="cb41-70"><a href="#cb41-70" aria-hidden="true" tabindex="-1"></a>all_unbSimp<span class="ot">&lt;-</span> lego_parts <span class="sc">%&gt;%</span></span>
<span id="cb41-71"><a href="#cb41-71" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(set_name) <span class="sc">%&gt;%</span></span>
<span id="cb41-72"><a href="#cb41-72" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">unbias.simp=</span> vegan<span class="sc">::</span><span class="fu">rarefy</span>(<span class="fu">table</span>(quantity), </span>
<span id="cb41-73"><a href="#cb41-73" aria-hidden="true" tabindex="-1"></a>                     <span class="dv">2</span>) <span class="sc">-</span> <span class="dv">1</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There were 5552 warnings in `dplyr::summarize()`.
The first warning was:
ℹ In argument: `unbias.simp = vegan::rarefy(table(quantity), 2) - 1`.
ℹ In group 1: `set_name = "'Where Are My Pants?' Guy"`.
Caused by warning in `vegan::rarefy()`:
! most observed count data have counts 1, but smallest count is 2
ℹ Run `dplyr::last_dplyr_warnings()` to see the 5551 remaining warnings.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stw_alpha&lt;- Starwars %&gt;%</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co">#     group_by(set_name) %&gt;%</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co">#     dplyr::summarize(alpha= vegan::fisher.alpha(table(quantity))) </span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>all_S<span class="ot">&lt;-</span> lego_parts <span class="sc">%&gt;%</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(set_name) <span class="sc">%&gt;%</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">S=</span> vegan<span class="sc">::</span><span class="fu">specnumber</span>(<span class="fu">table</span>(quantity)))</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>all_J<span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">cbind</span>(<span class="at">set_name=</span>all_H<span class="sc">$</span>set_name, <span class="at">J=</span> all_H<span class="sc">$</span>H<span class="sc">/</span><span class="fu">log</span>(all_S<span class="sc">$</span>S)))</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="co">#(J= H/log(S))</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a><span class="co"># ALL SETS INCLUDED. </span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>allsets_div<span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">cbind</span>(</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>                            all_H, </span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>                            <span class="at">simp=</span> all_Simp<span class="sc">$</span>simp,</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>                            <span class="at">invSimp=</span> all_invSimp<span class="sc">$</span>invSimp,</span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>                            <span class="at">unbias.simp=</span> all_unbSimp<span class="sc">$</span>unbias.simp,</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">S=</span> all_S<span class="sc">$</span>S,</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">J=</span> all_J<span class="sc">$</span>J</span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>                            ))</span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>tt<span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">table</span>(lego_parts<span class="sc">$</span>set_name))</span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>tt <span class="ot">&lt;-</span> <span class="fu">rename</span>(tt, <span class="st">"set_name"</span><span class="ot">=</span>Var1, <span class="st">"num_parts"</span><span class="ot">=</span>Freq)</span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>tt<span class="ot">&lt;-</span> <span class="fu">inner_join</span>(tt, lego_parts[,<span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">11</span>,<span class="dv">12</span>)], <span class="at">by =</span> <span class="st">"set_name"</span>,<span class="at">multiple=</span><span class="st">"first"</span>)</span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a><span class="co"># allsets_div&lt;-  as.data.frame(cbind(tt,allsets_div))</span></span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a>allsets_div <span class="ot">&lt;-</span> <span class="fu">left_join</span>(tt, allsets_div,</span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">by=</span><span class="st">"set_name"</span>) </span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a>allsets_div<span class="ot">&lt;-</span> allsets_div <span class="sc">%&gt;%</span> <span class="co"># Filtering out H'=0 records.</span></span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">filter</span>(H <span class="sc">&gt;</span> <span class="fl">0.5</span>)  <span class="sc">%&gt;%</span> </span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">filter</span>(num_parts<span class="sc">&gt;</span> <span class="dv">15</span>)</span>
<span id="cb43-32"><a href="#cb43-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-33"><a href="#cb43-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Plots of H' vs no. parts for sets.</span></span>
<span id="cb43-34"><a href="#cb43-34" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb43-35"><a href="#cb43-35" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(allsets_div<span class="sc">$</span>num_parts,allsets_div<span class="sc">$</span>H)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lego_files/figure-html/diversity_all_sets-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>gg <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(allsets_div, <span class="fu">aes</span>(<span class="at">x =</span> num_parts, <span class="at">y =</span> H)) <span class="sc">+</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span> <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>gg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lego_files/figure-html/diversity_all_sets-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="analyses-for-part-related-themes-subsetted" class="level3">
<h3 class="anchored" data-anchor-id="analyses-for-part-related-themes-subsetted">Analyses for part-related themes; subsetted</h3>
<p>Here I subsetted those themes that have actaul part-related sets., i.e., excluding themes like Books, Gear, etc.</p>
<p>I’m usismg the whole part list in order to estimate diversity parameters on sets.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select rows in lego_parts that match those sets listed in 'subset_themes_n10'.</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>subset_parts_themes_n10<span class="ot">&lt;-</span> lego_parts <span class="sc">%&gt;%</span> </span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Subsetting main themes (those with ≥ 10 sets).</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Here I filter those themes not included in </span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>     <span class="co"># subset_themes_n10, but using the whole list</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>     <span class="co"># of parts.</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>     <span class="fu">select</span>(theme_name, </span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>                      theme_id, </span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>                      set_img_url,</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>                      set_num, </span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>                      set_name, </span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>                      year, </span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>                      num_parts,</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>                      inventory_id, </span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>                      part_cat_id,</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>                      part_category,</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>                      part_num, </span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>                      part_name,</span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>                      quantity,</span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>                      part_img_url,</span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>                      part_material,</span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>                      color_id,</span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>                      color_name,</span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>                      is_trans,</span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a>                      rgb,</span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a>                      parent_id,</span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>                      is_spare,</span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a>                      version) <span class="sc">%&gt;%</span> </span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a>     <span class="co">#dplyr::group_by(theme_name, set_name) %&gt;%</span></span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a>     <span class="co">#dplyr::summarise(sum_parts = sum(num_parts), n = n()) %&gt;% </span></span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a>     <span class="co">#dplyr::filter(sum_parts&gt; 0) %&gt;% </span></span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Audio and'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Minifig'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Key Chain'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Books'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Service Packs'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Stationery and Office Supplies'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Duplo and Explore'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-40"><a href="#cb46-40" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Houseware'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-41"><a href="#cb46-41" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Clocks and Watches'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-42"><a href="#cb46-42" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Storage'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-43"><a href="#cb46-43" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Bulk Bricks'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-44"><a href="#cb46-44" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Duplo'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-45"><a href="#cb46-45" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Magnets'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-46"><a href="#cb46-46" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Primo'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-47"><a href="#cb46-47" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Tabletop Games and Puzzles'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-48"><a href="#cb46-48" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'LEGO Originals'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-49"><a href="#cb46-49" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Power Functions'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-50"><a href="#cb46-50" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Powered Up'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-51"><a href="#cb46-51" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Books'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-52"><a href="#cb46-52" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Books'</span>, theme_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-53"><a href="#cb46-53" aria-hidden="true" tabindex="-1"></a>     dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">'Value'</span>, theme_name)) <span class="co">#%&gt;% </span></span>
<span id="cb46-54"><a href="#cb46-54" aria-hidden="true" tabindex="-1"></a>     <span class="co">#dplyr::filter(n &gt; 9) %&gt;% dplyr::arrange(desc(n))</span></span>
<span id="cb46-55"><a href="#cb46-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-56"><a href="#cb46-56" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------</span></span>
<span id="cb46-57"><a href="#cb46-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Groups of models</span></span>
<span id="cb46-58"><a href="#cb46-58" aria-hidden="true" tabindex="-1"></a><span class="co"># ALL SETS.</span></span>
<span id="cb46-59"><a href="#cb46-59" aria-hidden="true" tabindex="-1"></a>subset_parts_themes_n10_H<span class="ot">&lt;-</span> subset_parts_themes_n10 <span class="sc">%&gt;%</span></span>
<span id="cb46-60"><a href="#cb46-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(set_name) <span class="sc">%&gt;%</span></span>
<span id="cb46-61"><a href="#cb46-61" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">H=</span> vegan<span class="sc">::</span><span class="fu">diversity</span>(<span class="fu">table</span>(quantity), </span>
<span id="cb46-62"><a href="#cb46-62" aria-hidden="true" tabindex="-1"></a>                 <span class="at">index =</span> <span class="st">"shannon"</span>, <span class="at">MARGIN =</span> <span class="dv">1</span>, <span class="at">base =</span> <span class="fu">exp</span>(<span class="dv">1</span>)))</span>
<span id="cb46-63"><a href="#cb46-63" aria-hidden="true" tabindex="-1"></a>subset_parts_themes_n10_Simp<span class="ot">&lt;-</span> subset_parts_themes_n10 <span class="sc">%&gt;%</span></span>
<span id="cb46-64"><a href="#cb46-64" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(set_name) <span class="sc">%&gt;%</span></span>
<span id="cb46-65"><a href="#cb46-65" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">simp=</span> vegan<span class="sc">::</span><span class="fu">diversity</span>(<span class="fu">table</span>(quantity), <span class="st">"simpson"</span>)) </span>
<span id="cb46-66"><a href="#cb46-66" aria-hidden="true" tabindex="-1"></a>subset_parts_themes_n10_invSimp<span class="ot">&lt;-</span> subset_parts_themes_n10 <span class="sc">%&gt;%</span></span>
<span id="cb46-67"><a href="#cb46-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(set_name) <span class="sc">%&gt;%</span></span>
<span id="cb46-68"><a href="#cb46-68" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">invSimp=</span> vegan<span class="sc">::</span><span class="fu">diversity</span>(<span class="fu">table</span>(quantity), </span>
<span id="cb46-69"><a href="#cb46-69" aria-hidden="true" tabindex="-1"></a>                 <span class="at">index =</span> <span class="st">"inv"</span>)) </span>
<span id="cb46-70"><a href="#cb46-70" aria-hidden="true" tabindex="-1"></a>subset_parts_themes_n10_unbSimp<span class="ot">&lt;-</span> subset_parts_themes_n10 <span class="sc">%&gt;%</span></span>
<span id="cb46-71"><a href="#cb46-71" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(set_name) <span class="sc">%&gt;%</span></span>
<span id="cb46-72"><a href="#cb46-72" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">unbias.simp=</span> vegan<span class="sc">::</span><span class="fu">rarefy</span>(<span class="fu">table</span>(quantity), </span>
<span id="cb46-73"><a href="#cb46-73" aria-hidden="true" tabindex="-1"></a>                     <span class="dv">2</span>) <span class="sc">-</span> <span class="dv">1</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There were 4325 warnings in `dplyr::summarize()`.
The first warning was:
ℹ In argument: `unbias.simp = vegan::rarefy(table(quantity), 2) - 1`.
ℹ In group 1: `set_name = "'Where Are My Pants?' Guy"`.
Caused by warning in `vegan::rarefy()`:
! most observed count data have counts 1, but smallest count is 2
ℹ Run `dplyr::last_dplyr_warnings()` to see the 4324 remaining warnings.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stw_alpha&lt;- Starwars %&gt;%</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="co">#     group_by(set_name) %&gt;%</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="co">#     dplyr::summarize(alpha= vegan::fisher.alpha(table(quantity))) </span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>subset_parts_themes_n10_S<span class="ot">&lt;-</span> subset_parts_themes_n10 <span class="sc">%&gt;%</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(set_name) <span class="sc">%&gt;%</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">S=</span> vegan<span class="sc">::</span><span class="fu">specnumber</span>(<span class="fu">table</span>(quantity)))</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>subset_parts_themes_n10_J<span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">cbind</span>(<span class="at">set_name=</span>subset_parts_themes_n10_H<span class="sc">$</span>set_name, <span class="at">J=</span> subset_parts_themes_n10_H<span class="sc">$</span>H<span class="sc">/</span><span class="fu">log</span>(subset_parts_themes_n10_S<span class="sc">$</span>S)))</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="co">#(J= H/log(S))</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a><span class="co"># ALL SETS INCLUDED. </span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>subset_parts_themes_n10_div<span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">cbind</span>(</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>                            all_H, </span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>                            <span class="at">simp=</span> all_Simp<span class="sc">$</span>simp,</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>                            <span class="at">invSimp=</span> all_invSimp<span class="sc">$</span>invSimp,</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>                            <span class="at">unbias.simp=</span> all_unbSimp<span class="sc">$</span>unbias.simp,</span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">S=</span> all_S<span class="sc">$</span>S,</span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">J=</span> all_J<span class="sc">$</span>J</span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>                            ))</span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a>tt<span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">table</span>(subset_parts_themes_n10<span class="sc">$</span>set_name))</span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>tt <span class="ot">&lt;-</span> <span class="fu">rename</span>(tt, <span class="st">"set_name"</span><span class="ot">=</span>Var1, <span class="st">"num_parts"</span><span class="ot">=</span>Freq)</span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a>tt<span class="ot">&lt;-</span> <span class="fu">inner_join</span>(tt, subset_parts_themes_n10[,<span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">11</span>,<span class="dv">12</span>)], <span class="at">by =</span> <span class="st">"set_name"</span>,<span class="at">multiple=</span><span class="st">"first"</span>)</span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a><span class="co"># allsets_div&lt;-  as.data.frame(cbind(tt,allsets_div))</span></span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a>subset_parts_themes_n10_div <span class="ot">&lt;-</span> <span class="fu">left_join</span>(tt, subset_parts_themes_n10_div,</span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">by=</span><span class="st">"set_name"</span>) </span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a>subset_parts_themes_n10_div<span class="ot">&lt;-</span> subset_parts_themes_n10_div <span class="sc">%&gt;%</span> <span class="co"># Filtering out H'=0 records.</span></span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">filter</span>(H <span class="sc">&gt;</span> <span class="fl">0.5</span>)  <span class="sc">%&gt;%</span> </span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">filter</span>(num_parts<span class="sc">&gt;</span> <span class="dv">15</span>)</span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Plots of H' vs no. parts for sets.</span></span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb48-35"><a href="#cb48-35" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(subset_parts_themes_n10_div<span class="sc">$</span>num_parts,subset_parts_themes_n10_div<span class="sc">$</span>H)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lego_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>gg <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(subset_parts_themes_n10_div, <span class="fu">aes</span>(<span class="at">x =</span> num_parts, <span class="at">y =</span> H)) <span class="sc">+</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span> <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>gg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lego_files/figure-html/unnamed-chunk-1-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="network-plots" class="level3">
<h3 class="anchored" data-anchor-id="network-plots">Network plots</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Input edgelist</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>model75344 <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/models_adj/75344-1-Boba Fett's Starship Microfighter-el.csv"</span>), <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>model75344.g<span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">graph_from_edgelist</span>(<span class="fu">as.matrix</span>(<span class="fu">cbind</span>(model75344[,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)])),</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">directed=</span> F)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="co"># E(model75344.g)$weight&lt;- model75344[,4]</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>com <span class="ot">&lt;-</span> <span class="fu">cluster_leading_eigen</span>(model75344.g)</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>eb <span class="ot">&lt;-</span> <span class="fu">cluster_edge_betweenness</span>(model75344.g)</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(model75344.g)<span class="sc">$</span>color <span class="ot">&lt;-</span> com<span class="sc">$</span>membership<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>pal2 <span class="ot">&lt;-</span> <span class="fu">rainbow</span>(<span class="dv">5</span>, <span class="at">alpha=</span>.<span class="dv">5</span>)</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a><span class="fu">vertex_attr</span>(model75344.g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$name
 [1] "18651"  "11458"  "20482"  "61184"  "3068b"  "54383"  "54384"  "3020"  
 [9] "32952"  "35480"  "24307"  "64567"  "41682"  "26601"  "24299"  "15068" 
[17] "32064a" "2419"   "4865b"  "76766"  "73562"  "85080"  "27925"  "36840" 
[25] "99207"  "54200"  "85984"  "13548"  "3040b"  "42862"  "48165"  "23950" 
[33] "32803"  "3713"   "44861"  "4740"   "3034"   "3023"   "3022"   "92474" 

$color
 [1] 2 5 3 3 4 4 4 6 7 7 5 3 5 5 5 5 2 8 7 7 8 4 2 4 2 6 6 4 4 4 4 2 7 2 6 8 4 6
[39] 7 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot of parts interactions. Numbers are LEGo part numbers.</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Colors are clusters.</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">plot.igraph</span>(model75344.g, <span class="at">layout =</span> layout.fruchterman.reingold, </span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>     <span class="co"># === vertex</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>     <span class="co"># === vertex label</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label.family=</span><span class="st">"Helvetica"</span>,</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label.font=</span> <span class="dv">2</span>,</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label.cex=</span> <span class="fl">1.25</span>, </span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label.color=</span> <span class="st">"black"</span>,</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.color=</span> <span class="fu">adjustcolor</span>(model75344.g<span class="sc">$</span>color, <span class="at">alpha.f =</span> .<span class="dv">7</span>),</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label.dist=</span> <span class="dv">0</span>, </span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>     <span class="co"># === Edge</span></span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.color=</span><span class="st">"darkgrey"</span>,</span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.width=</span> <span class="dv">2</span>,   <span class="co">#(model75344[,4]),</span></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.lty=</span><span class="st">"solid"</span>,     </span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>     <span class="at">edge.curved=</span> <span class="fl">0.725</span>,</span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>     <span class="co"># === Other</span></span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>     <span class="at">margin=</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">rescale=</span> <span class="cn">TRUE</span></span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>     )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in matrix(offset, nrow = 4L, ncol = ncol(x)): non-empty data for
zero-extent matrix</code></pre>
</div>
<div class="cell-output-display">
<p><img src="lego_files/figure-html/networks-1.png" class="img-fluid" width="1152"></p>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A 3D plot, interactive. Needs X11.</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>coords <span class="ot">&lt;-</span> <span class="fu">layout_with_fr</span>(model75344.g, <span class="at">dim=</span><span class="dv">3</span>)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rglplot</span>(model75344.g, </span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">layout=</span>coords,</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">vertex.label.color=</span> <span class="st">"black"</span>,</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">vertex.color=</span> model75344.g<span class="sc">$</span>color,</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">vertex.label.dist=</span> <span class="fl">2.35</span>,</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">vertex.label.degree=</span> pi , </span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">edge.width=</span><span class="dv">2</span>                      </span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>     )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="plots-with-ggraph" class="level3">
<h3 class="anchored" data-anchor-id="plots-with-ggraph">Plots with <code>ggraph</code></h3>
<div class="cell" data-fig.h="12">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(tidygraph)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>ggp <span class="ot">&lt;-</span> <span class="fu">ggraph</span>(model75344.g, <span class="st">'igraph'</span>, <span class="at">algorithm =</span> <span class="st">'kk'</span>) <span class="sc">+</span> </span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_arc</span>(<span class="at">strength =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_edge_width_continuous(model75344[,4]) +</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span> </span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_edge_alpha</span>(<span class="st">'model75344[,4]'</span>) <span class="sc">+</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_point</span>(<span class="at">color =</span> <span class="st">'steelblue'</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">alpha=</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>  ggforce<span class="sc">::</span><span class="fu">theme_no_axes</span>()</span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a><span class="co"># readPNG function to load an image that we have stored on our computer:</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>my_image <span class="ot">&lt;-</span> <span class="fu">readPNG</span>(<span class="st">"images/75344-1-Boba Fett's Starship.png"</span>, <span class="at">native =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the inset_element function to add our picture to our ggplot2 graphic:</span></span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>ggp_image <span class="ot">&lt;-</span> ggp <span class="sc">+</span>                  <span class="co"># Combine plot &amp; image</span></span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inset_element</span>(<span class="at">p =</span> my_image,</span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a>                <span class="at">left =</span> <span class="fl">0.65</span>,</span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a>                <span class="at">bottom =</span> <span class="fl">0.1</span>,</span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a>                <span class="at">right =</span> <span class="fl">0.9</span>,</span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a>                <span class="at">top =</span> <span class="fl">0.35</span>, <span class="at">align_to =</span> <span class="st">'full'</span>, <span class="at">clip=</span>T)</span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a>ggp_image                           <span class="co"># Draw combined plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using the `size` aesthetic in this geom was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` in the `default_aes` field and elsewhere instead.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="lego_files/figure-html/ggraph_plots-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.2.2 (2022-10-31)
Platform: aarch64-apple-darwin20 (64-bit)
Running under: macOS Ventura 13.2.1

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/lib/libRblas.0.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices datasets  utils     methods   base     

other attached packages:
 [1] tidygraph_1.2.3      ggraph_2.1.0         patchwork_1.1.2     
 [4] png_0.1-8            gt_0.8.0.9000        igraph_1.4.1        
 [7] bipartite_2.18       sna_2.7-1            network_1.18.1      
[10] statnet.common_4.8.0 vegan_2.6-4          lattice_0.20-45     
[13] permute_0.9-7        knitr_1.42           devtools_2.4.5      
[16] usethis_2.1.6        summarytools_1.0.1   lubridate_1.9.2     
[19] forcats_1.0.0        stringr_1.5.0        dplyr_1.1.0         
[22] purrr_1.0.1          readr_2.1.4          tidyr_1.3.0         
[25] tibble_3.1.8         ggplot2_3.4.1        tidyverse_2.0.0     
[28] here_1.0.1          

loaded via a namespace (and not attached):
  [1] colorspace_2.1-0   pryr_0.1.5         ellipsis_0.3.2    
  [4] rprojroot_2.0.3    base64enc_0.1-3    fs_1.6.1          
  [7] rstudioapi_0.14    farver_2.1.1       graphlayouts_0.8.4
 [10] remotes_2.4.2      ggrepel_0.9.3      bit64_4.0.5       
 [13] fansi_1.0.4        codetools_0.2-18   splines_4.2.2     
 [16] extrafont_0.19     cachem_1.0.7       polyclip_1.10-4   
 [19] pkgload_1.3.2      spam_2.9-1         jsonlite_1.8.4    
 [22] Rttf2pt1_1.3.12    cluster_2.1.4      ggforce_0.4.1     
 [25] shiny_1.7.4        compiler_4.2.2     backports_1.4.1   
 [28] Matrix_1.5-3       fastmap_1.1.1      cli_3.6.0         
 [31] tweenr_2.0.2       later_1.3.0        htmltools_0.5.4   
 [34] prettyunits_1.1.1  tools_4.2.2        dotCall64_1.0-2   
 [37] coda_0.19-4        gtable_0.3.1       glue_1.6.2        
 [40] reshape2_1.4.4     maps_3.4.1         Rcpp_1.0.10       
 [43] vctrs_0.5.2        nlme_3.1-161       extrafontdb_1.0   
 [46] xfun_0.37          ps_1.7.2           timechange_0.2.0  
 [49] mime_0.12          miniUI_0.1.1.1     lifecycle_1.0.3   
 [52] MASS_7.3-58.1      scales_1.2.1       vroom_1.6.0       
 [55] hms_1.1.2          promises_1.2.0.1   parallel_4.2.2    
 [58] fields_14.1        yaml_2.3.7         memoise_2.0.1     
 [61] gridExtra_2.3      pander_0.6.5       stringi_1.7.12    
 [64] checkmate_2.1.0    pkgbuild_1.4.0     rlang_1.0.6       
 [67] pkgconfig_2.0.3    matrixStats_0.63.0 rgl_1.0.14        
 [70] evaluate_0.20      rapportools_1.1    htmlwidgets_1.6.1 
 [73] labeling_0.4.2     bit_4.0.5          processx_3.8.0    
 [76] tidyselect_1.2.0   plyr_1.8.8         magrittr_2.0.3    
 [79] R6_2.5.1           magick_2.7.4       generics_0.1.3    
 [82] profvis_0.3.7      pillar_1.8.1       withr_2.5.0       
 [85] mgcv_1.8-41        crayon_1.5.2       utf8_1.2.3        
 [88] tzdb_0.3.0         rmarkdown_2.20     urlchecker_1.0.1  
 [91] viridis_0.6.2      grid_4.2.2         callr_3.7.3       
 [94] digest_0.6.31      xtable_1.8-4       httpuv_1.6.9      
 [97] munsell_0.5.0      viridisLite_0.4.1  tcltk_4.2.2       
[100] sessioninfo_1.2.2 </code></pre>
</div>
</div>
<hr>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>